pre-commit:
  parallel: false
  jobs:
    - group:
        name: "Format backend"
        glob: "backend/**/*.java"
        jobs:
          - run: cd backend && ./gradlew spotlessApply
    - group:
        name: "Verify backend"
        parallel: true
        glob: "backend/**/*.java"
        jobs:
          - run: cd backend && ./gradlew spotlessCheck
          - run: cd backend && ./gradlew checkstyleMain checkstyleTest
          - run: cd backend && ./gradlew spotbugsMain spotbugsTest
          - run: cd backend && ./gradlew test
          - run: cd backend && ./gradlew systemTest
    - group:
        name: "Verify frontend"
        parallel: true
        glob: "frontend/**/*.dart"
        jobs:
          - run: cd frontend && flutter analyze
          - run: cd frontend && dart format --set-exit-if-changed .
          - run: cd frontend && flutter test