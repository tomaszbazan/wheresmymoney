<?xml version="1.0" encoding="UTF-8"?>
<FindBugsFilter>
    <!-- Wyklucz pliki generowane automatycznie -->
    <Match>
        <Class name="~.*\.generated\..*"/>
    </Match>

    <Match>
        <Class name="~.*\$.*Builder"/>
    </Match>

    <!-- Wyklucz testy jednostkowe od niektórych sprawdzeń -->
    <Match>
        <Class name="~.*Test"/>
        <Bug pattern="DM_DEFAULT_ENCODING"/>
    </Match>

    <Match>
        <Class name="~.*Test"/>
        <Bug pattern="URF_UNREAD_FIELD"/>
    </Match>

    <!-- Spring Boot Configuration Classes -->
    <Match>
        <Class name="~.*Config"/>
        <Bug pattern="UWF_UNWRITTEN_FIELD"/>
    </Match>

    <Match>
        <Class name="~.*Configuration"/>
        <Bug pattern="UWF_UNWRITTEN_FIELD"/>
    </Match>

    <!-- JPA Entities -->
    <Match>
        <Class name="~.*Entity"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>

    <Match>
        <Class name="~.*Entity"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <Match>
        <Class name="~.*Entity"/>
        <Bug pattern="SE_NO_SERIALVERSIONID"/>
    </Match>

    <!-- DTOs -->
    <Match>
        <Class name="~.*DTO"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>

    <Match>
        <Class name="~.*DTO"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <Match>
        <Class name="~.*Dto"/>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>

    <Match>
        <Class name="~.*Dto"/>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <!-- Controllers - Spring używa refleksji -->
    <Match>
        <Class name="~.*Controller"/>
        <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
    </Match>

    <!-- Spring Boot Main Class -->
    <Match>
        <Class name="~.*Application"/>
        <Method name="main"/>
        <Bug pattern="DM_EXIT"/>
    </Match>

    <!-- Lombok generowane metody -->
    <Match>
        <Bug pattern="EQ_DOESNT_OVERRIDE_EQUALS"/>
        <Class name="~.*"/>
        <Method name="~canEqual.*"/>
    </Match>

    <Match>
        <Bug pattern="NP_BOOLEAN_RETURN_NULL"/>
        <Method name="~equals.*"/>
    </Match>

    <!-- Repository interfaces - Spring Data JPA -->
    <Match>
        <Class name="~.*Repository"/>
        <Bug pattern="SE_NO_SERIALVERSIONID"/>
    </Match>

    <!-- Exception Classes -->
    <Match>
        <Class name="~.*Exception"/>
        <Bug pattern="SE_NO_SERIALVERSIONID"/>
    </Match>

    <!-- Utility Classes -->
    <Match>
        <Class name="~.*Utils"/>
        <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
    </Match>

    <Match>
        <Class name="~.*Util"/>
        <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
    </Match>

    <!-- Constants Classes -->
    <Match>
        <Class name="~.*Constants"/>
        <Bug pattern="URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD"/>
    </Match>

    <!-- Spring Security -->
    <Match>
        <Class name="~.*SecurityConfig"/>
        <Bug pattern="SPRING_ENDPOINT_PASSWORD_IS_LEAKED"/>
    </Match>

    <!-- Falszywe alarmy dla Spring Boot -->
    <Match>
        <Bug pattern="HARD_CODE_PASSWORD"/>
        <Or>
            <Class name="~.*Properties"/>
            <Class name="~.*Config"/>
            <Class name="~.*Configuration"/>
        </Or>
    </Match>

    <!-- WebMvcConfigurer implementations -->
    <Match>
        <Class name="~.*WebConfig"/>
        <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
    </Match>

    <!-- Event Listeners -->
    <Match>
        <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
        <Method name="~handle.*"/>
    </Match>

    <Match>
        <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
        <Method name="~on.*Event"/>
    </Match>

    <!-- Scheduled Methods -->
    <Match>
        <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
        <Method name="~scheduled.*"/>
    </Match>

    <!-- Jackson Serialization -->
    <Match>
        <Bug pattern="SE_TRANSIENT_FIELD_NOT_RESTORED"/>
        <Class name="~.*"/>
    </Match>

    <!-- Validation Annotations -->
    <Match>
        <Bug pattern="UWF_UNWRITTEN_FIELD"/>
        <Field name="~.*"/>
        <Class name="~.*Request"/>
    </Match>

    <Match>
        <Bug pattern="UWF_UNWRITTEN_FIELD"/>
        <Field name="~.*"/>
        <Class name="~.*Response"/>
    </Match>

    <!-- OpenAPI/Swagger -->
    <Match>
        <Class name="~.*ApiResponse"/>
        <Bug pattern="URF_UNREAD_FIELD"/>
    </Match>

    <!-- MapStruct Mappers -->
    <Match>
        <Class name="~.*Mapper"/>
        <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
    </Match>

    <Match>
        <Class name="~.*MapperImpl"/>
        <Bug pattern="UPM_UNCALLED_PRIVATE_METHOD"/>
    </Match>

    <!-- Falszywe alarmy dla testów integracyjnych -->
    <Match>
        <Class name="~.*IT"/>
        <Bug pattern="UWF_UNWRITTEN_FIELD"/>
    </Match>

    <Match>
        <Class name="~.*IntegrationTest"/>
        <Bug pattern="UWF_UNWRITTEN_FIELD"/>
    </Match>

    <!-- Enum Classes -->
    <Match>
        <Bug pattern="SE_NO_SERIALVERSIONID"/>
        <Class name="~.*"/>
        <Method name="~valueOf.*"/>
    </Match>

    <!-- Record Classes (Java 14+) -->
    <Match>
        <Bug pattern="EI_EXPOSE_REP"/>
        <Class name="~.*Record"/>
    </Match>

    <Match>
        <Bug pattern="EI_EXPOSE_REP2"/>
        <Class name="~.*Record"/>
    </Match>

    <!-- Specific Bug Pattern Exclusions -->

    <!-- Exclude DM_DEFAULT_ENCODING for configuration files -->
    <Match>
        <Bug pattern="DM_DEFAULT_ENCODING"/>
        <Or>
            <Class name="~.*Properties"/>
            <Class name="~.*Config"/>
        </Or>
    </Match>

    <!-- Exclude SQL injection warnings for legitimate parameterized queries -->
    <Match>
        <Bug pattern="SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE"/>
        <Class name="~.*Repository"/>
    </Match>

    <!-- Path Traversal - often false positives in Spring Boot -->
    <Match>
        <Bug pattern="PT_ABSOLUTE_PATH_TRAVERSAL"/>
        <Method name="~.*upload.*"/>
    </Match>

    <!-- Trust Boundary Violation - often false in Spring Boot controllers -->
    <Match>
        <Bug pattern="TRUST_BOUNDARY_VIOLATION"/>
        <Class name="~.*Controller"/>
    </Match>

    <!-- HTTP Response Splitting - usually handled by Spring -->
    <Match>
        <Bug pattern="HRS_REQUEST_PARAMETER_TO_HTTP_HEADER"/>
        <Class name="~.*Controller"/>
    </Match>

    <!-- Unnecessary Math on BigDecimal -->
    <Match>
        <Bug pattern="ICAST_INTEGER_MULTIPLY_CAST_TO_LONG"/>
        <Method name="~.*calculate.*"/>
    </Match>

    <!-- Boxing/Unboxing in collections -->
    <Match>
        <Bug pattern="BX_BOXING_IMMEDIATELY_UNBOXED"/>
        <Method name="~.*stream.*"/>
    </Match>

    <!-- Dead stores in builder patterns -->
    <Match>
        <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
        <Method name="~build.*"/>
    </Match>

    <!-- Inner class could be static - często niepotrzebne w Spring Boot -->
    <Match>
        <Bug pattern="SIC_INNER_SHOULD_BE_STATIC_ANON"/>
        <Class name="~.*Config"/>
    </Match>

    <!-- Method names should start with lowercase - Spring Boot conventions -->
    <Match>
        <Bug pattern="NM_METHOD_NAMING_CONVENTION"/>
        <Class name="~.*Test"/>
    </Match>

    <!-- Unconfirmed cast - Spring often uses generics safely -->
    <Match>
        <Bug pattern="BC_UNCONFIRMED_CAST"/>
        <Class name="~.*Service"/>
    </Match>

    <Match>
        <Bug pattern="BC_UNCONFIRMED_CAST"/>
        <Class name="~.*Repository"/>
    </Match>

    <!-- Dependency Injection - EI_EXPOSE_REP2 is expected for DI patterns -->
    <Match>
        <Bug pattern="EI_EXPOSE_REP2"/>
        <Class name="~.*Service"/>
    </Match>

    <Match>
        <Bug pattern="EI_EXPOSE_REP2"/>
        <Class name="~.*Controller"/>
    </Match>

    <Match>
        <Bug pattern="EI_EXPOSE_REP2"/>
        <Class name="~.*Facade"/>
    </Match>

    <Match>
        <Bug pattern="EI_EXPOSE_REP2"/>
        <Class name="~.*Repository"/>
    </Match>

    <Match>
        <Bug pattern="EI_EXPOSE_REP2"/>
        <Class name="~.*ModuleFacade"/>
    </Match>

    <!-- Lombok @With annotation generates code with string comparison using == -->
    <Match>
        <Bug pattern="ES_COMPARING_PARAMETER_STRING_WITH_EQ"/>
        <Class name="pl.btsoftware.backend.category.domain.Category"/>
        <Method name="withName"/>
    </Match>
</FindBugsFilter>